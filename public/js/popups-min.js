$(document).ready(function(){$(".popup-gallery").magnificPopup({delegate:"a",type:"image",tLoading:"Loading image #%curr%...",mainClass:"mfp-img-mobile",gallery:{enabled:!0,navigateByImgClick:!0,preload:[0,1]},image:{tError:'<a href="%url%">The image #%curr%</a> could not be loaded.',titleSrc:function(e){return e.el.attr("title")}}})}),$(document).ready(function(){$(".spoiler_links").click(function(){return $(this).parent().children("div.spoiler_body").toggle("normal"),!1})}),$(function(){var e=$("#events_mega_modal");e.validate({errorPlacement:function(e,t){t.before(e)},rules:{events_name:{required:!0,minlength:2},tags:{required:!0},ways:{required:!0},events_city:{required:!0,minlength:3},events_address:{required:!0,minlength:3},my_hidden_lectors:{required:!0,minlength:1}},messages:{events_name:{required:"Поле 'Название' обязательно к заполнению",minlength:"Введите не менее 2-х символов в поле 'Название'"},tags:{required:"Поле 'Вид мероприятия' обязательно к заполнению"},ways:{required:"Поле 'Направление' обязательно к заполнению"},events_city:{required:"Поле 'Город' обязательно к заполнению",minlength:"Введите не менее 3-х символов в поле 'Город'"},events_address:{required:"Поле 'Адрес' обязательно к заполнению",minlength:"Введите не менее 3-х символов в поле 'Адрес'"},my_hidden_lectors:{required:"К мероприятию должен быть прикреплен хотя бы один лектор",minlength:"К мероприятию должен быть прикреплен хотя бы один лектор"}}}),e.children("div").steps({headerTag:"h2",bodyTag:"section",transitionEffect:"fade",enableFinishButton:!1,enableAllSteps:!0,autoFocus:!0,transitionEffectSpeed:500,titleTemplate:'<span class="title">#title#</span>',onStepChanging:function(t,n,i){if(1==n&&(""==$("#data-start").val()||""==$("#data-finish").val()||""==$("#time-start").val()||""==$("#time-finish").val()))return Swal.fire({icon:"warning",title:"Упс!",text:"Дата начала и окончания должна быть заполненна полностью"}),!1;if(1==n){var c=$("#data-start").val(),l=$("#time-start").val(),a=c.split("."),o=a[2]+"-"+a[1]+"-"+a[0]+"T"+l+":00";if(new Date(o)<new Date)return Swal.fire({icon:"warning",title:"Упс!",text:"Дата начала не может быть раньше текущей даты и времени"}),!1}if(2==n){CKEDITOR.replace("editor1",{height:270});if(""==$("#my_hidden_lectors").val())return Swal.fire({icon:"warning",title:"Упс!",text:"Хотя бы один лектор - должен быть выбран"}),!1}if(3==n){let e=CKEDITOR.instances.editor1.getData();$("#editor1").html(e)}return e.validate(),e.valid()},labels:{previous:"Previous",next:"Далее",finish:"Готово",current:""},onInit:function(e,t){$("#data-start").inputmask("99.99.9999"),$("#data-finish").inputmask("99.99.9999"),$("#time-start").inputmask("99:99"),$("#time-finish").inputmask("99:99")}})}),$(function(){var e=[];$("#workType label").on("click",function(){var t=$(this).children("input"),n=$(this).text(),i=e.indexOf(n);t.prop("checked")?(t.parent().addClass("selected"),-1==i&&e.push(n)):(i>-1&&e.splice(i,1),t.parent().removeClass("selected")),$("#workTypeTags").val(e.join(", "))})}),$(function(){$(".type_toggle").click(function(){return $(".workTypeLabel").slideToggle(100),!1})}),$(function(){$(".selected input.workTypeCheck").on("change",function(e){$(this).siblings(":checked").length>=1&&(this.checked=!1)})}),$(function(){var e=[];$("#workLine label").on("click",function(){var t=$(this).children("input"),n=$(this).text(),i=e.indexOf(n);t.prop("checked")?(t.parent().addClass("selected"),-1==i&&e.push(n)):(i>-1&&e.splice(i,1),t.parent().removeClass("selected")),$("#workLineTags").val(e.join(", "))})}),$(function(){$(".line_toggle").click(function(e){$(".workLineLabel").slideToggle(300),console.log("122")}),$(document).click(function(e){0==$(e.target).closest(".workLineLabel").length&&"line_toggle"!=$(e.target).attr("class")&&$(".workLineLabel").hide()})}),$(function(){$(".line_toggle_city").click(function(e){$(".mainSelectCity").slideToggle(300)}),$(document).click(function(e){0==$(e.target).closest(".mainSelectCity").length&&"line_toggle_city"!=$(e.target).attr("class")&&$(".mainSelectCity").hide()})}),$(function(){$(".line_toggle_lector").click(function(e){$(".mainSelectLector").slideToggle(300)}),$(document).click(function(e){0==$(e.target).closest(".mainSelectLector").length&&"line_toggle_lector"!=$(e.target).attr("class")&&$(".mainSelectLector").hide()})}),$(function(){$(".checkbox_line").click(function(){var e=[];$.each($(".checkbox_line:checked"),function(t,n){e[t]=$(n).val()}),$("#my_hidden_val").val(e.join(","))})}),$(function(){$(".events__block").click(function(){var e=[];$.each($(".events__block input[type='checkbox']:checked"),function(t,n){e[t]=$(n).val()}),$("#my_hidden_lectors").val(e.join(", "))})}),$(function(){$(".main-select__type").click(function(){var e=[];$.each($(".main-select__type input[type='checkbox']:checked"),function(t,n){e[t]=$(n).val()}),$("#my_hidden_way").val(e.join(", "))})}),$(function(){$(".main-select__lector").click(function(){var e=[];$.each($(".main-select__lector input[type='checkbox']:checked"),function(t,n){e[t]=$(n).val()}),$("#my_hidden_lectors").val(e.join(", "))})}),$(function(){$(".main-select__city").click(function(){var e=[];$.each($(".main-select__lector input[type='checkbox']:checked"),function(t,n){e[t]=$(n).val()}),$("#my_hidden_city").val(e.join(", "))})}),$(function(){$(window).width()<767&&$(".title").text("Шаг")});