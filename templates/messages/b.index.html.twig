{% extends 'base.html.twig' %}

{% block title %}Hello MessagesController!{% endblock %}

{% block body %}

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" charset="utf-8"></script>
<script>
    var ws = new WebSocket("ws://127.0.0.1:6820/");
    ws.onmessage = function(evt) {
      // console.log(evt);
      // alert(evt.data);

      $('.message_box').append('<span>'+evt.data+'</span><br>');
    };
</script>

<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

<div class="example-wrapper">
    <h1>Hello ! ✅</h1>
    {# {{ dump(message_list) }} #}
    Переписки:
    <div class="conferences">
      {% for message in message_list %}
        <div class="conferences_block">
        <a href="/messages/{{message.from_user_id}}">
        <p>{{message.full_name}} - {{message.datetime}}</p>
        </a>
        </div>
      {% endfor %}
    </div>

    <div class="message_box">

    </div>


</div>
{% endblock %}
